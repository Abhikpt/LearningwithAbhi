@page "/"
@layout MainLayout
@using System.Timers

<div class="home-page">
    <!-- Hero Section with Clock -->
    <div class="hero-section bg-primary text-white p-5 rounded-bottom-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="display-4 fw-bold">Welcome to My Blazor Web Tools</h1>
                    <p class="lead">Explore blogs, web tools, and practice automation with ease!</p>
                    <div class="d-flex align-items-center gap-3">
                        <a href="#features" class="btn btn-light btn-lg px-4 me-2">Discover Features</a>
                        <div class="clock-display bg-dark p-2 rounded">
                            <i class="bi bi-clock me-2"></i>
                            <span>@currentTime</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 d-none d-md-block">
                    <img src="images/top-blogging-tools2.jpg" class="img-fluid rounded-3 shadow" alt="Web Tools Illustration">
                </div>
            </div>
        </div>
    </div>

    <!-- Interactive Value Display -->
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h3 class="card-title text-center mb-4">Quick Interactive Demo</h3>
                        <div class="slider-container px-3">
                            <input type="range" 
                                   min="0" 
                                   max="100" 
                                   step="1" 
                                   @bind="demoValue" 
                                   @bind:event="oninput"
                                   class="form-range mb-3" />
                            
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="value-display text-center flex-grow-1">
                                    <span class="display-4 fw-bold" style="color: @GetValueColor()">@demoValue</span>
                                    <div class="progress mt-2" style="height: 10px;">
                                        <div class="progress-bar" 
                                             style="width: @(demoValue + "%"); background-color: @GetValueColor()">
                                        </div>
                                    </div>
                                    <p class="mt-2 text-muted">@GetValueDescription()</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Grid -->
    <div id="features" class="container my-5">
        <h2 class="text-center mb-5">Explore Our Features</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <FeatureCard 
                    Href="/blogs"
                    Title="Blogs" 
                    Description="Stay informed with articles on Blazor, automation, and development insights."
                    Command="Read Blogs"
                    Icon="bi-journal-text"
                    ColorClass="bg-info"
                />
            </div>
            <div class="col-md-4">
                <FeatureCard 
                    Href="/tools"
                    Title="Web Tools" 
                    Description="Access calculators and other tools to simplify your daily tasks."
                    Command="Try Tools"
                    Icon="bi-tools"
                    ColorClass="bg-success"
                />
            </div>
            <div class="col-md-4">
                <FeatureCard 
                    Href="/automation-practice"
                    Title="Practice Automation" 
                    Description="Test your automation scripts on our specially designed demo page."
                    Command="Practice Now"
                    Icon="bi-robot"
                    ColorClass="bg-warning"
                />
            </div>
        </div>
    </div>

    <!-- Footer with User Greeting -->
    <footer class="bg-light py-4 mt-5">
        <div class="container text-center">
            <p class="mb-0">Welcome back, <span class="fw-bold">@user.TrimStart('-').Trim()</span></p>
        </div>
    </footer>
</div>

@code {
    private string user = "- Abhi";
    private string currentTime = DateTime.Now.ToString("dd-MMM-yyyy HH:mm:ss");
    private int demoValue = 50;

    private void UpdateClock()
    {
        currentTime = DateTime.Now.ToString("dd-MMM-yyyy HH:mm:ss");
        StateHasChanged();
    }

    private string GetValueDescription()
    {
        if (demoValue < 20)
            return "Getting started";
        else if (demoValue < 40)
            return "Making progress";
        else if (demoValue < 60)
            return "Halfway there";
        else if (demoValue < 80)
            return "Almost complete";
        else
            return "Excellent work!";
    }

    private string GetValueColor()
    {
        if (demoValue < 20)
            return "#dc3545"; // Red
        else if (demoValue < 40)
            return "#fd7e14"; // Orange
        else if (demoValue < 60)
            return "#ffc107"; // Yellow
        else if (demoValue < 80)
            return "#0dcaf0"; // Cyan
        else
            return "#198754"; // Green
    }

    protected override void OnInitialized()
    {
        var timer = new Timer(1000);
        timer.Elapsed += (sender, e) => InvokeAsync(UpdateClock);
        timer.Start();
    }
}

<style>
    .home-page {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    .hero-section {
        background: linear-gradient(135deg, #0d6efd 0%, #0b5ed7 100%);
        margin-bottom: 2rem;
    }

    .clock-display {
        font-family: 'Courier New', monospace;
        font-weight: bold;
    }

    .feature-card {
        transition: transform 0.2s;
        height: 100%;
    }

        .feature-card:hover {
            transform: translateY(-5px);
        }

    .value-display {
        transition: color 0.3s;
    }
</style>